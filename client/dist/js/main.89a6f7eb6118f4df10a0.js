!function(e){function t(t){for(var n,o,l=t[0],c=t[1],s=t[2],p=0,m=[];p<l.length;p++)o=l[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={0:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;i.push([107,1]),a()}({107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),l=a(30),c=a(141),s=a(80),u=Object(s.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:"#DC143C"},success:{main:c.a.A200},background:{default:"#fff"},status:{danger:"#DC143C"}}}),p=a(153),m=a(26),d=a(59),g=a.n(d),f=a(48),h=a.n(f),b=a(49),v=a.n(b),y=a(50),O=a.n(y),j=a(51),w=a.n(j),E=a(19),C=a.n(E),P=a(52),k=a.n(P),D=a(9),S=a.n(D),x=a(5),F=a(155),A=a(148),T=a(77),L=a.n(T),q=a(76),N=a.n(q),R=a(156),I=a(157),W=a(158),_=a(146),z=a(154),M=a(147),U=a(149),J=a(14),B=a(2),H=a.n(B),Q=a(57),V=a.n(Q);var G=function(e,t,a){var n=null,r=!1;try{n=JSON.parse(t),r=!0}catch(e){n=t}this.response=n,this.message=e,this.status=a,J.b.error("Server returned error: ".concat(this.toString()),{autoClose:1e4}),this.toString=function(){return"".concat(this.message,"\nResponse:\n").concat(r?JSON.stringify(this.response,null,2):this.response)}},K="//tools.wmflabs.org/edgarsdev/";var X=function(e,t){var a="";"http"==e.substr(0,4)?a=e:K!==e.substr(0,K.length)&&(a=K+e);var n,r=void 0===t?"":(n=t,"?"+Object.keys(n).reduce((function(e,t){return e.push(t+"="+encodeURIComponent(n[t])),e}),[]).join("&"));return"".concat(a).concat(r)};function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){S()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={},n={},r=["post","put","patch"],i=Z({},a,{},t,{headers:Z({},n,{},t.headers)});i.method=i.method.toLowerCase();var o=i.body instanceof File;i.body&&"object"===V()(i.body)&&!o&&r.indexOf(i.method)>-1&&(i.headers={Accept:"application/json","Content-Type":"application/json"},i.body=JSON.stringify(i.body));var l=X(e,i.params),c=null;return fetch(l,i).then((function(e){return(c=e).status<200||c.status>=300?c.text():c.json()})).then((function(e){if(c.status<200||c.status>=300)throw e;return e})).catch((function(e){throw c?new G("Request failed with status ".concat(c.status,"."),e,c.status):new G(e.toString(),null,"REQUEST_FAILED")}))},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $(e,{params:t,method:"get"})},te={mediawiki:{getArticleText:function(e){return ee("https://lv.wikipedia.org/w/api.php",{action:"parse",origin:"*",format:"json",page:e,redirects:1,prop:"text"})},articleInfo:function(e){return ee("https://lv.wikipedia.org/w/api.php",{action:"query",origin:"*",format:"json",titles:e,redirects:1,prop:"revisions|redirects|categories|langlinks",rvprop:"timestamp|flags|comment|user",rvlimit:"max",rvdir:"newer",rdlimit:"max",cllimit:"max"})},openSearch:function(e,t){return ee("https://".concat(e,".wikipedia.org/w/api.php"),{action:"opensearch",origin:"*",format:"json",formatversion:2,search:t,namespace:0,limit:10,suggest:!0})},deleteLog:function(e){return ee("https://lv.wikipedia.org/w/api.php",{action:"query",origin:"*",format:"json",list:"logevents",letype:"delete",letitle:e})},pageviews:function(e,t,a){return ee("https://wikimedia.org/api/rest_v1/metrics/pageviews/per-article/lv.wikipedia/all-access/user/".concat(e.replace(/ /g,"_"),"/daily/").concat(t,"00/").concat(a,"00"))}},tool:{submit:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $(e,{body:t,method:"post"})}("data",{info:e})}}};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ne=Object(m.b)({name:"main",initialState:{from:null,to:null,filters:null},reducers:{setData:{reducer:function(e,t){var a=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){S()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{from:a.from,to:a.to,filters:a.filters})},prepare:function(e,t,a){return{payload:{from:e,to:t,filters:a}}}}}}),re=ne.actions.setData,ie=ne.reducer;function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(a),!0).forEach((function(t){S()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ce={error:!1,loading:!1,hasRequested:!1,list:[],completionTime:null,reqID:null,isCached:!1,cacheAge:null},se=Object(m.b)({name:"data",initialState:ce,reducers:{setData:{reducer:function(e,t){return console.log(t.payload),le({},e,{},t.payload)},prepare:function(e){return{payload:e}}},setLoading:{reducer:function(e,t){return le({},e,{loading:t.payload.value})},prepare:function(e){return{payload:{value:e}}}},setInit:{reducer:function(e){return le({},ce,{loading:e.loading})}}}}),ue=se.actions,pe=ue.setData,me=ue.setLoading,de=ue.setInit,ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,a){var n=a().main,r=n.from,i=n.to,o=n.filters;t(me(!0)),t(de());var l={from:r,to:i,filters:o,ignoreCache:e};te.tool.submit(l).then((function(e){var a=e.data,n=e.success,r=e.meta;t(pe(!0===n?{hasRequested:!0,list:a,completionTime:r.time,reqID:r.id,isCached:r.cached,cacheAge:r.cache_age}:{hasRequested:!0,error:!0}))})).catch((function(e){t(pe({hasRequested:!0,error:!0}))})).finally((function(){t(me(!1))}))}},fe=se.reducer;function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){S()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ve={category:{title:"",depth:0,talk:!1},template:{title:"",talk:!1},petscan:{id:""}},ye=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=O()(this,(e=w()(t)).call.apply(e,[this].concat(r))),S()(C()(a),"state",{inputLanguage:"",project:"wikipedia",targetLanguage:"",titleLanguage:"",output:"list",outputOptions:["list","json","table"],onlyArticles:!0,filters:[{type:"category",specific:{title:"",depth:0,talk:!1}}]}),S()(C()(a),"handleChange",(function(e){var t=e.target,n=t.name,r=t.value,i=t.checked,o=t.type;a.setState(S()({},n,"checkbox"===o?i:r))})),S()(C()(a),"handleFilterChange",(function(e){return function(t){var n=t.target,r=n.name,i=n.value,o=n.checked,l="checkbox"===n.type?o:i,c=g()(a.state.filters);if("type"===r)return c[e]=S()({specific:ve[l]},r,l),void a.setState({filters:c});if(l.length>0&&"depth"===r){var s=parseInt(l);if(s>10||s<0)return}var u=c[e];u=be({},u,{specific:be({},u.specific,S()({},r,l))}),c[e]=u,a.setState({filters:c})}})),S()(C()(a),"removeFilter",(function(e){a.setState({filters:a.state.filters.filter((function(t,a){return a!==e}))})})),S()(C()(a),"addFilter",(function(e){a.setState({filters:[].concat(g()(a.state.filters),[{type:"category",specific:ve.category}])})})),S()(C()(a),"submit",(function(e){var t=a.state,n=t.inputLanguage,r=t.targetLanguage,i=(t.titleLanguage,t.filters);if(""!=n)if(""!=r)if(n!==r)if(0!==i.length){var o=!1;i.forEach((function(e,t){if(!o){var a=e.type,n=e.specific;if("category"===a){if(""===n.title)return J.b.warn("Please fill filter nr. ".concat(t+1),{autoClose:7500}),void(o=!0)}else if("template"===a){if(""===n.title)return J.b.warn("Please fill filter nr. ".concat(t+1),{autoClose:7500}),void(o=!0)}else if("petscan"===a&&""===n.id)return J.b.warn("Please fill filter nr. ".concat(t+1),{autoClose:7500}),void(o=!0)}})),o||(a.props.setRequestData(n,r,i),a.props.getData())}else J.b.warn("Add at least one filter",{autoClose:7500});else J.b.warn("Input and target languages are the same!",{autoClose:7500});else J.b.warn("Please add target language",{autoClose:7500});else J.b.warn("Please add input language",{autoClose:7500})})),a}return k()(t,e),v()(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputLanguage,n=t.targetLanguage,i=(t.onlyArticles,t.filters),o=this.props,l=o.classes,c=o.dataLoading;return r.a.createElement("div",{className:l.root},r.a.createElement(F.a,{label:"Input language",name:"inputLanguage",onChange:this.handleChange,value:a,size:"small",variant:"outlined",margin:"dense"}),r.a.createElement(F.a,{label:"Without interwiki to",name:"targetLanguage",onChange:this.handleChange,value:n,size:"small",variant:"outlined",margin:"dense"}),r.a.createElement("br",null),i.map((function(t,a){var n=t.type,o=t.specific;return r.a.createElement("div",{key:a},r.a.createElement(M.a,null),r.a.createElement(A.a,{"aria-label":"delete",className:l.margin,onClick:function(){return e.addFilter(a)}},r.a.createElement(N.a,{fontSize:"small"})),i.length>1&&r.a.createElement(A.a,{"aria-label":"delete",className:l.margin,onClick:function(){return e.removeFilter(a)}},r.a.createElement(L.a,{fontSize:"small"})),r.a.createElement(_.a,{variant:"outlined",className:l.formControl},r.a.createElement(I.a,{htmlFor:"outlined-age-simple"},"Filter type"),r.a.createElement(z.a,{margin:"dense",value:n,name:"type",onChange:e.handleFilterChange(a),input:r.a.createElement(R.a,{name:"age",id:"outlined-age-simple"})},r.a.createElement(W.a,{value:"category"},"Category"),r.a.createElement(W.a,{value:"petscan"},"Petscan"),r.a.createElement(W.a,{value:"template"},"Template"))),"category"===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{label:"Category title",name:"title",onChange:e.handleFilterChange(a),value:o.title,variant:"outlined",margin:"dense",style:{margin:8,width:"300px"},fullWidth:!0}),r.a.createElement(F.a,{label:"Depth",name:"depth",type:"number",inputProps:{min:"0",max:"10",step:"1"},onChange:e.handleFilterChange(a),value:o.depth,size:"small",variant:"outlined",margin:"dense"})),"template"===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{label:"Template title",name:"title",onChange:e.handleFilterChange(a),value:o.title,size:"small",variant:"outlined",margin:"dense",style:{margin:8,width:"300px"},fullWidth:!0})),"pagelinks"===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{label:"Article title",name:"title",onChange:e.handleFilterChange(a),value:o.title,size:"small",variant:"outlined",margin:"dense"}),r.a.createElement(_.a,{variant:"outlined",className:l.formControl},r.a.createElement(I.a,{htmlFor:"outlined-age-simple"},"Mode"),r.a.createElement(z.a,{margin:"dense",value:o.mode,name:"mode",onChange:e.handleFilterChange(a),input:r.a.createElement(R.a,{name:"age",id:"outlined-age-simple"})},r.a.createElement(W.a,{value:"linksto"},"WhatLinksHere"),r.a.createElement(W.a,{value:"linksfrom"},"Links on page")))),"petscan"===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{label:"Petscan ID",name:"id",onChange:e.handleFilterChange(a),value:o.id,size:"small",variant:"outlined",margin:"dense",style:{margin:8,width:"300px"},fullWidth:!0})))})),r.a.createElement(U.a,{disabled:c,variant:"contained",color:"primary",disableelevation:"true",onClick:this.submit},"Submit"))}}]),t}(n.Component);ye.propTypes={classes:H.a.object};var Oe={setRequestData:function(e,t,a){return function(n){n(re(e,t,a))}},getData:ge},je=Object(l.b)((function(e){return{dataLoading:e.data.loading}}),Oe)(Object(x.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},margin:{margin:e.spacing(1)}}}),{withTheme:!0})(ye)),we=a(152),Ee=a(151),Ce=a(78),Pe=a.n(Ce),ke=a(150),De=Object(ke.a)((function(e){var t;return{col3:(t={columnCount:1},S()(t,e.breakpoints.up("sm"),{columnCount:2}),S()(t,e.breakpoints.up("md"),{columnCount:3}),t),col2:{columnCount:2},removedUnderline:{textDecoration:"none"}}})),Se=function(e){var t=e.list,a=e.language,n=De();return r.a.createElement("div",{className:n.col3},r.a.createElement("ul",null,t.map((function(e){var t=Pe()(e,2),i=t[0],o=t[1];return r.a.createElement("li",{key:i},r.a.createElement("a",{className:n.removedUnderline,href:"https://".concat(a,".wikipedia.org/wiki/").concat(i),target:"_blank"},i.replace(/_/g," ")),": ",o)}))))},xe=a(42),Fe=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=O()(this,(e=w()(t)).call.apply(e,[this].concat(r))),S()(C()(a),"state",{anchorEl:null}),S()(C()(a),"reloadWithoutCache",(function(){a.props.getData(!0)})),a}return k()(t,e),v()(t,[{key:"render",value:function(){var e=this.state.anchorEl,t=this.props,a=t.classes,n=t.loading,i=t.articles,o=t.time,l=t.isCached,c=t.cacheAge,s=t.language,u=t.reqID,p=t.hasRequested;Boolean(e);return n?r.a.createElement("div",{className:a.loadingPageWrapper},r.a.createElement(Ee.a,{className:a.loadingPage})):p?r.a.createElement("div",{className:a.root},r.a.createElement(we.a,{component:"div",variant:"body1"},u&&r.a.createElement("span",{className:a.floatRight},"Request ",u,": ",r.a.createElement(xe.b,{to:"/request"},"with autoload"),", ",r.a.createElement(xe.b,{to:"/users"},"without autoload")),i.length>0?r.a.createElement(r.a.Fragment,null,l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:a.infoText},"Showing ",c," seconds old cached version of list. ",r.a.createElement("span",{className:a.loadWithoutCache,onClick:this.reloadWithoutCache},"Load live data!"))),r.a.createElement(Se,{list:i,language:s}),r.a.createElement("span",{className:a.infoText},"Query took ",o," seconds to complete")):"No data")):""}}]),t}(n.Component);Fe.propTypes={classes:H.a.object};var Ae={getData:ge},Te=Object(l.b)((function(e){var t=e.data,a=e.main;return{loading:t.loading,articles:t.list,time:t.completionTime,isCached:t.isCached,cacheAge:t.cacheAge,reqID:t.reqID,hasRequested:t.hasRequested,language:a.from}}),Ae)(Object(x.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},loadingPage:{display:"flex",margin:"0 auto"},loadingPageWrapper:{position:"fixed",width:"100%",height:"100%",display:"flex",alignItems:"center",top:"0"},infoText:{fontSize:"0.8rem"},loadWithoutCache:{cursor:"pointer"},floatRight:{float:"right"}}}),{withTheme:!0})(Fe)),Le=function(){return r.a.createElement("div",null,r.a.createElement(we.a,{variant:"h4"},"Missing articles"),r.a.createElement(we.a,{style:{marginBottom:"10px"},component:"div",variant:"body1"},"List articles from one Wikipedia containing the most interwikis without article in target Wikipedia"),r.a.createElement(je,null),r.a.createElement(Te,null))},qe=a(28);function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(a),!0).forEach((function(t){S()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ie=Object(m.b)({name:"app",initialState:{isAuth:!1,user:null,articles:null,lastArticleDate:null},reducers:{setOverview:{reducer:function(e,t){var a=t.payload;return Re({},e,{articles:a.count,lastArticleDate:a.date})},prepare:function(e,t){return{payload:{count:e,date:t}}}},setAuthUser:{reducer:function(e,t){return Re({},e,{user:t.payload.user,isAuth:!0})},prepare:function(e){return{payload:{user:e}}}},logout:{reducer:function(e){return Re({},e,{user:null,isAuth:!1})}}}}),We=Ie.actions,_e=(We.setOverview,We.setAuthUser,We.logout,Ie.reducer),ze=(a(106),function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"Did not found page ",r.a.createElement("code",null,t.pathname)))});ze.propTypes={location:H.a.object};var Me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,null,r.a.createElement(qe.c,null,r.a.createElement(qe.a,{exact:!0,path:"/",component:Le}),r.a.createElement(qe.a,{component:ze})),r.a.createElement(J.a,{position:"bottom-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!0})))},Ue=a(16),Je=Object(Ue.combineReducers)({app:_e,main:ie,data:fe}),Be=Object(m.a)({reducer:Je});o.a.render(r.a.createElement(l.a,{store:Be},r.a.createElement(p.a,{theme:u},r.a.createElement(Me,null))),document.getElementById("app"))}});
//# sourceMappingURL=main.89a6f7eb6118f4df10a0.js.map